<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Forgot Password - Social Platform</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#215bed",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101522",
                        "surface-dark": "#1a1f2e",
                        "surface-glass": "rgba(30, 35, 50, 0.7)",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px" },
                    backdropBlur: {
                        xs: '2px',
                    }
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #111318;
        }

        ::-webkit-scrollbar-thumb {
            background: #282d39;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3b4254;
        }

        .glass-panel {
            background: rgba(30, 35, 50, 0.6);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .input-dark {
            background-color: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-dark:focus {
            border-color: #215bed;
            box-shadow: 0 0 0 4px rgba(33, 91, 237, 0.15);
            outline: none;
            background-color: rgba(255, 255, 255, 0.08);
        }

        .btn-gradient {
            background: linear-gradient(135deg, #215bed 0%, #3b76f6 100%);
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-[#111318] dark:text-white font-display overflow-hidden min-h-screen flex items-center justify-center relative selection:bg-primary/30">
    <div class="fixed inset-0 pointer-events-none z-0 overflow-hidden">
        <div
            class="absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-primary/20 rounded-full blur-[140px] opacity-40 mix-blend-screen animate-pulse duration-[8000ms]">
        </div>
        <div
            class="absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] bg-purple-600/20 rounded-full blur-[120px] opacity-30 mix-blend-screen">
        </div>
        <div
            class="absolute top-[40%] left-[60%] w-[30%] h-[30%] bg-cyan-500/10 rounded-full blur-[100px] opacity-30 mix-blend-screen">
        </div>
        <div
            class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4wNSkiLz48L3N2Zz4=')] opacity-50">
        </div>
    </div>
    <main class="w-full max-w-md p-6 relative z-10">
        <div class="glass-panel rounded-2xl p-8 md:p-10 w-full relative overflow-hidden group">
            <div
                class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-70">
            </div>
            <a class="inline-flex items-center gap-2 text-white/40 hover:text-white text-sm font-medium mb-8 transition-colors group/back"
                href="#">
                <span
                    class="material-symbols-outlined text-[20px] group-hover/back:-translate-x-1 transition-transform">arrow_back</span>
                <a href="login.html"> Back to Sign In</a>
            </a>
            <div class="flex flex-col gap-3 mb-8 text-center">
                <div
                    class="size-14 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-2 ring-1 ring-primary/20 shadow-[0_0_30px_-5px_rgba(33,91,237,0.3)]">
                    <span
                        class="material-symbols-outlined text-primary text-[28px] drop-shadow-[0_0_10px_rgba(33,91,237,0.5)]">lock_reset</span>
                </div>
                <h1 class="text-2xl font-bold text-white tracking-tight">Forgot password?</h1>
                <p class="text-white/50 text-sm leading-relaxed">
                    No worries, we'll send you reset instructions.
                </p>
            </div>
            <form id="forget-password-form" class="flex flex-col gap-6"
                onsubmit="event.preventDefault(); handleForgetPassword();">
                <div class="flex flex-col gap-2">
                    <label class="text-xs font-semibold text-white/70 uppercase tracking-wider ml-1" for="email">Email
                        address</label>
                    <div class="relative group/input">
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <span
                                class="material-symbols-outlined text-white/30 group-focus-within/input:text-primary transition-colors">mail</span>
                        </div>
                        <input class="w-full pl-11 pr-4 py-3.5 rounded-xl input-dark text-sm placeholder-white/20"
                            id="email" name="email" placeholder="Enter your email" required="" type="email" />
                    </div>
                    <p class="text-xs text-white/30 ml-1">We'll send a secure link to this email.</p>
                </div>
                <button
                    class="btn-gradient w-full py-3.5 px-4 rounded-xl text-white font-semibold text-sm shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-2 group/btn"
                    type="submit">
                    <span>Reset Password</span>
                    <span
                        class="material-symbols-outlined text-[18px] group-hover/btn:translate-x-1 transition-transform">arrow_forward</span>
                </button>
            </form>
            <div class="mt-8 pt-6 border-t border-white/5 text-center">
                <p class="text-sm text-white/40">
                    Can't access your email?
                    <a class="text-primary hover:text-primary/80 font-medium transition-colors ml-1 underline decoration-primary/30 hover:decoration-primary underline-offset-4"
                        href="#">Contact Support</a>
                </p>
            </div>
        </div>
        <div
            class="absolute -bottom-16 left-0 w-full flex justify-center opacity-40 hover:opacity-100 transition-opacity duration-500">
            <div class="flex items-center gap-2">
                <div class="size-6 bg-gradient-to-tr from-primary to-purple-500 rounded-lg"></div>
                <span class="text-white font-bold tracking-tight text-sm">SocialNexus</span>
            </div>
        </div>
    </main>

    <script>
        const API_BASE_URL = 'http://127.0.0.1:8000/api';

        async function handleForgetPassword() {
            const email = document.getElementById('email').value;
            const btn = document.querySelector('button[type="submit"]');
            const originalBtnContent = btn.innerHTML;

            if (!email) {
                alert('Please enter your email address');
                return;
            }

            // Set loading state
            btn.innerHTML = '<span class="material-symbols-outlined animate-spin text-[20px]">progress_activity</span> Sending...';
            btn.disabled = true;

            try {
                const response = await fetch(`${API_BASE_URL}/forget_password`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ email: email })
                });

                const data = await response.json();

                if (response.ok && data.success) {
                    alert('Reset link sent! Check your email.');
                    // Optional: Redirect or show specific success UI
                } else {
                    alert(data.message || 'Failed to send reset link. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again later.');
            } finally {
                // Reset button state
                btn.innerHTML = originalBtnContent;
                btn.disabled = false;
            }
        }
    </script>
</body>

</html>